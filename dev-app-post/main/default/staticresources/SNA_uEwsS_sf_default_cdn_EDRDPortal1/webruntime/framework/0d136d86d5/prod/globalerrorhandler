!function(){"use strict";const e=`/webruntime${"/log/errors"}`;const t="UNKNOWN_ERROR";const{window:n}=globalThis;let o=!1;function r(t){const n=document.querySelector('meta[name="basePath"]')?.getAttribute("content")||"";!function(e,t){const n=JSON.stringify(t);if(!(window&&window.navigator&&window.navigator.sendBeacon&&window.navigator.sendBeacon(e,n))){const t=new XMLHttpRequest;t.open("POST",e,!0),t.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),t.send(n)}}(globalThis.location.origin+n+e,t)}function a({subject:e,error:o={},webruntimeBootstrap:a,extra:s,type:i=t}){let c,l,d;o?(c=o.message,l=o.stack,d=o.wcstack):s&&(c=s.message);const{pathname:u,hostname:m}=n.location,b={subject:e,message:c,stack:l,wcstack:d,webruntimeBootstrap:a,extra:s,location:{pathname:u,hostname:m}};!function(e,t){document.dispatchEvent(new CustomEvent("client-error",{detail:{error:e,type:t}}))}(b,i),r(b)}function s(e={}){const{message:t,filename:n,lineno:o,colno:r,error:s}=e,c={subject:"window error",webruntimeBootstrap:{deployTarget:document.querySelector('meta[name="deployTarget"]')?.getAttribute("content")||"CORE"},error:s,extra:{message:t,filename:n,lineno:o,colno:r}};i(c),a(c)}function i(e){o&&delete e.webruntimeBootstrap}n?.addEventListener("error",s),n?.addEventListener("unhandledrejection",((e={})=>{const{reason:t={}}=e,n={subject:"unhandledrejection",webruntimeBootstrap:!0,error:t};i(n),a(n)})),n?.addEventListener("bootstrapLoaded",(()=>{o=!0})),globalThis.LWR=globalThis?.LWR||{},globalThis.LWR&&Object.isExtensible(globalThis.LWR)&&(globalThis.LWR.onError=s)}();
