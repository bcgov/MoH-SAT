!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).redirectForLocale=n()}(this,(function(){"use strict";function e(e,n,i){if(n){const t=30484800;document.cookie=`${e}=${n};path=${i};Max-Age=${t}`}else document.cookie=`${e}=;path=${i};expires=Thu, 01 Jan 1970 00:00:01 GMT`}return function({defaultLocale:n,activeLanguages:i,cookieKey:t,basePath:o,useCombinedLanguageSearch:l,userAgentsToSkipRedirect:c}){if(null==o||!i||i.length<=1)return;const s=o.split("/");let a=s.length<2?"":s[s.length-1];const{pathname:d}=window.location;if(new RegExp(`/${a}([/?#]|$)`).test(d))i.includes(a)||(a="");else{let e;const n=new RegExp(`/(${i.join("|")})([/?#]|$)`),t=d.match(n);t&&(e=t[1]);const l=new RegExp(`/${a}$`);e?(o=o.replace(l,`/${e}`),a=e):(o=o.replace(l,""),a="")}const u=window.navigator.languages;let f;if(l)for(const e of u){if(i.includes(e)){f=e;break}if(i.includes(e.split("-")[0])){f=e.split("-")[0];break}}else if(f=u.find((e=>i.includes(e))),!f){const e=i.filter((e=>!e.includes("-")));f=u.map((e=>e.split("-")[0])).find((n=>e.includes(n)))}const r=new RegExp(`\\/${a}\\/?`),p=a?o.replace(r,""):o,g=document.cookie.split("; ").reduce(((e,n)=>{const[i,...t]=n.split("=");return e[i]=t.join("="),e}),{})[t],w=Boolean(g&&i.includes(g)),h="/",$=window.navigator.userAgent;if($){if(c.some((e=>$.includes(e))))return void(a&&i.includes(a)?e(t,a,h):e(t,n,h))}if(a&&i.includes(a))e(t,w||f!==a?a:null,h);else if(/[?&]redirect=false/.test(window.location.search))e(t,n===f?null:n,h);else if(w){if(g!==n){const e=window.location.pathname.replace(o,`${p}/${g}`);window.location.pathname=e}}else if(f&&f!==n){const e=window.location.pathname.replace(o,`${p}/${f}`);window.location.pathname=e}}}));
